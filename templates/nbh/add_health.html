{% extends 'templates/index.html'%}
{% load static %}
{% block title %}家族及疾病史{% endblock %}
{% block css %}
<link href="{% static '/css/scales_style.css' %}" rel="stylesheet" >
{% endblock %}
{% block content %}
    <div class="right_col" role="main">
        <div class="container">
           <div class="row show-grid">
            <div class="col-md-12 col-sm-12 col-xs-12">
                <ul class="breadcrumb" style="background-color: white;font-weight:bold">
                   <li ><a href="#">量表录入</a></li>
                   <li><a href="#" >个人详细信息录入</a></li>
                   <li class="active"><a href="#" >家族及疾病史</a></li>
                </ul>
            </div>
          </div>
        </div> 
        <div class="dashboard_graph x_panel" style="height:80%">
          <div id="wrapper">
            <div id = "left-side" style="height: 100%;" class="col-md-2">
              <ul class="scales_progress">
                <li class="step1 done">
                  <p>家庭信息</p>
                </li>
                <li class="step2 done ">
                  <p>学习情况</p>
                </li>
                <li class="step3 doing">
                  <p>家庭及疾病史</p>
                </li>
                <li class="step4 nodone ">
                  <p>物质依赖</p>
                </li>
                <li class="step5 nodone ">
                  <p>其他资料</p>
                </li>
                <li class="step6 nodone ">
                  <p>利手信息</p>
                </li>
                <li class="finish nodone ">
                  <p>完成</p>
                </li>
              </ul>
            </div>  
             
            <div id="right-side" class="col-md-10">
              <div id="first" class="active">
                  <form name="healthform" action="/scales/add_health?patient_id={{ patient_id }}&patient_session_id={{ patient_session_id }}&questionnaire_type={{ questionnaire_type|add:1 }}" method="post" onSubmit="return myCheck(this)">
                          <div class="x_title">
                    <div class="clearfix"></div>
                    <h2>健康情况及家族史 <small>Health and family history</small></h2>
                    <div class="clearfix"></div>
                  </div>
                  <br>
                  <div class="x_content">
                    <br>
                    <div class="form-group row">
                      <label class="control-label col-md-2 col-sm-3 col-md-offset-1">既往是否有躯体疾病<span class="required">*:</span></label>
                      <div class="col-md-1 col-sm-1 " id="patient_somatic_diseases_1">
                        <input type="radio"  name="patient_somatic_diseases" value=1 data-labelauty="是"/>
                      </div>
                      <div class="col-md-1 col-sm-1 " id="patient_somatic_diseases_2">
                        <input type="radio"  name="patient_somatic_diseases" value=0 data-labelauty="否"/>
                      </div>
                        <div  class="suicides_next_question" id = "suicides_next_question001">
                      <label class="control-label col-md-1 col-sm-2 ">所患疾病<span class="required">:</span></label>
                      <div class="col-md-2 col-sm-2 form-group  ">
                        <input type="text" id="patient_somatic_diseases_name" name="patient_somatic_diseases_name" class="form-control" requierd>
                      </div>
                      <label class="control-label col-md-1 col-sm-2 ">患病时长<span class="required">:</span></label>
                      <div class="col-md-2 col-sm-1 form-group  ">
                        <input type="text" id="patient_somatic_diseases_year" name="patient_somatic_diseases_year" class="form-control" required>
                      </div>
                        </div>
                    </div>
                    <br>

                    <div class="form-group row">
                      <label class="control-label col-md-2 col-sm-3 col-md-offset-1 ">既往是否有精神疾病<span class="required">*:</span></label>
                      <div class="col-md-1 col-sm-1 " id="patient_mental_diseases_1">
                        <input type="radio"  name="patient_mental_diseases" value=0 data-labelauty="是"/>
                      </div>
                      <div class="col-md-1 col-sm-1 " id="patient_mental_diseases_2">
                        <input type="radio"  name="patient_mental_diseases" value=1 data-labelauty="否"/>
                      </div>
                        <div  class="suicides_question" id = "suicides_next_question001">
                      <label class="control-label col-md-1 col-sm-2 ">所患疾病<span class="required">:</span></label>
                      <div class="col-md-2 col-sm-2 form-group  ">
                        <input type="text" id="patient_mental_diseases_name" name="patient_mental_diseases_name" class="form-control" required>
                      </div>
                      <label class="control-label col-md-1 col-sm-2 ">患病时长<span class="required">:</span></label>
                      <div class="col-md-2 col-sm-1 form-group ">
                        <input type="text" id="patient_mental_diseases_year" name="patient_mental_diseases_year" class="form-control" required>
                      </div>
                        </div>
                    </div>
                    <br>

                    <div class="form-group row">
                      <label class="control-label col-md-1 col-sm-2 col-md-offset-2 col-sm-offset-1">家族史<span class="required">*:</span></label>
                      <div class="col-md-1 col-sm-1 " id="patient_family_diseases_history_1">
                        <input type="radio"  name="patient_family_diseases_history" value=1 data-labelauty="是"/>
                      </div>
                      <div class="col-md-1 col-sm-1 " id="patient_family_diseases_history_2">
                        <input type="radio"  name="patient_family_diseases_history" value=0 data-labelauty="否"/>
                      </div>
                        <div  class="suicides_question_n" id = "suicides_next_question001">
                      <label class="control-label col-md-1 col-sm-2 ">疾病名<span class="required">:</span></label>
                      <div class="col-md-2 col-sm-3 form-group has-feedback ">
                        <input type="text" id="patient_family_diseases_name" name="patient_family_diseases_name" class="form-control" required>
                      </div>
                        </div>
                    </div>
                    <br>

                    <div class="form-group row">
                      <label class="control-label col-md-3 col-sm-6 col-md-offset-3">用药情况（药物名称、剂量、用药周期）<span class="required">:</span></label>
                      <div class="col-md-4 col-sm-4 form-group ">
                        <input type="text" id="patient_medicine_information" name="patient_medicine_information" class="form-control ">
                      </div>
                    </div>
                    <br>

                    <div class="form-group row">
                      <label class="control-label col-md-4 col-sm-6 col-md-offset-2">治疗情况（治疗种类、治疗方案、治疗时长）<span class="required">:</span></label>
                      <div class="col-md-4 col-sm-4 form-group ">
                        <input type="text" id="patient_treatment_information" name="patient_treatment_information" class="form-control ">
                      </div>
                    </div>
                    <br>

                  </div>


                  <div class="row">
                        {% csrf_token %}
                        <div class="text-center">
                            <input  type="submit" class="btn btn-success" value="保存并提交量表，继续下一个量表"/>
                        </div>
                  </div>
                  </form>
              </div>
            </div>
          </div>
       </div>
    </div>



{% endblock %}

{% block js %}
        <script>
$(document).ready(function(){
    $(".suicides_next_question").hide();
    $(".suicides_question").hide();
    $(".suicides_question_n").hide();
    $("input:radio[name='patient_somatic_diseases']").click(function() {
        patient_somatic_diseases = $(this).val();
        if (Number(patient_somatic_diseases == 0)) {
            $(".suicides_next_question").hide();
            $("input[name='patient_somatic_diseases_name']").attr('disabled','disabled');
            $("input[name='patient_somatic_diseases_year']").attr('disabled','disabled');
        }
        if (Number(patient_somatic_diseases == 1)) {
            $("input[name='patient_somatic_diseases_name']").removeAttr("disabled");
            $("input[name='patient_somatic_diseases_year']").removeAttr("disabled");
            $(".suicides_next_question").show();
        }
    });
    $("input:radio[name='patient_mental_diseases']").click(function() {
        patient_mental_diseases = $(this).val();
        if (Number(patient_mental_diseases == 1)) {
            $(".suicides_question").hide();
            $("input[name='patient_mental_diseases_name']").attr('disabled','disabled');
            $("input[name='patient_mental_diseases_year']").attr('disabled','disabled');
        }
        if (Number(patient_mental_diseases == 0)) {
            $("input[name='patient_mental_diseases_name']").removeAttr("disabled");
            $("input[name='patient_mental_diseases_year']").removeAttr("disabled");
            $(".suicides_question").show();
        }
    });
    $("input:radio[name='patient_family_diseases_history']").click(function() {
        patient_family_diseases_history = $(this).val();
        if (Number(patient_family_diseases_history == 0)) {
            $(".suicides_question_n").hide();
            $("input[name='patient_family_diseases_name']").attr('disabled','disabled');
        }
        if (Number(patient_family_diseases_history == 1)) {
            $("input[name='patient_family_diseases_name']").removeAttr("disabled");
            $(".suicides_question_n").show();
        }
    });
});
</script>
<script type="text/javascript" src="{% static '/js/jquery-radio-beauty.js'%}"></script>

<script>
$(document).ready(function(){
	$("input[type='radio']").labelauty();
});
</script>
    <script type="text/javascript">
      function myCheck(healthform)
      {
          if (document.healthform.patient_somatic_diseases.value=="") {
              alert("问题一不能为空！");
              return false;
          }
          /*if (document.healthform.patient_somatic_diseases_name.value=="") {
              alert("问题一不能为空！");
              return false;
          }
          if (document.healthform.patient_somatic_diseases_year.value=="") {
              alert("问题一不能为空！");
              return false;
          }*/
          if (document.healthform.patient_mental_diseases.value=="") {
              alert("问题二不能为空！");
              return false;
          }
          /*if (document.healthform.patient_mental_diseases_name.value=="") {
              alert("问题二不能为空！");
              return false;
          }
          if (document.healthform.patient_mental_diseases_year.value=="") {
              alert("问题二不能为空！");
              return false;
          }*/
          if (document.healthform.patient_family_diseases_history.value=="") {
              alert("问题三不能为空！");
              return false;
          }
          /*
          if (document.healthform.patient_family_diseases_name.value=="") {
              alert("问题三不能为空！");
              return false;
          }*/
          if (document.healthform.patient_medicine_information.value=="") {
              alert("问题四不能为空！");
              return false;
          }
          if (document.healthform.patient_treatment_information.value=="") {
              alert("问题五不能为空！");
              return false;
          }
          alert("提交成功！");
          return true;
      }
    </script>
{% endblock %}
