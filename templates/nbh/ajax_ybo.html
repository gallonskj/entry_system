{% extends 'templates/index.html' %}
{% load static %}
{% load SelfDefinedFilter%}
{% block title %}耶鲁布朗强迫症严重程度标准量表{% endblock %}
{% block css %}
    <link href="{% static '/css/scales_style.css' %}" rel="stylesheet" >
{% endblock %}
{% block content %}
    <div class="right_col" role="main" >
        <div class="container">
            <div class="row show-grid">
                <div class="col-md-12 col-sm-12 col-xs-12">
                    <ul class="breadcrumb" style="background-color: white;font-weight:bold">
                         <li >量表录入</li>
                         <li>自评量表</li>
						 <li class="active">耶鲁布朗强迫症严重程度量表</li>
						 <div style="float: right;margin-bottom: 0;"></div>
                    </ul>
                </div>
            </div>
        </div>
        <div class="dashboard_graph x_panel" style="margin-top: 0;height:80%;">
            <div class="ybo_1" style="text-align: center;display: none">
                <form id="ybo_1" name="ybo_1" action="#">
					{% csrf_token %}
                    <div class="row"><h3>1. 您每天花多少时间在强迫思维上？每天强迫思维出现的频率有多高？</h3> </div>
                    <div class="options" style=" text-align: left;padding-left: 25%">
                        <div class="row show-grid" style="margin:10px">
							<label>
								<input type="radio" name="forced_frequency" class="forced_frequency_0" value = 0 data-labelauty="0=完全无强迫思维"/>
							</label>
						</div>
						<div class="row show-grid" style="margin:10px">
							<label>
								<input type="radio" name="forced_frequency" class="forced_frequency_others" value = 1 data-labelauty="1=轻微（少于一小时），或偶尔有（一天不超过8次）"/>
							</label>
						</div>
						<div class="row show-grid" style="margin:10px">
							<label>
								<input type="radio" name="forced_frequency" class="forced_frequency_others"  value=2 data-labelauty="2=中度（一至三小时），或常常有（一天超过8次，但一天大部分时间没有强迫思维）"/>
							</label>
						</div>
						<div class="row show-grid" style="margin:10px">
							<label>
								<input type="radio" name="forced_frequency" class="forced_frequency_others" value=3 data-labelauty="3=重度（多于三小时但不超过八小时），或频率非常高（一天超过8次，且一天大部分时间有强迫思维）"/>
							</label>
						</div>
						<div class="row show-grid" style="margin:10px">
							<label>
								<input type="radio" name="forced_frequency" class="forced_frequency_others"  value=4 data-labelauty="4=极重（多于八小时），或几乎无时无刻都有（次数多到无法计算，且一小时内很少没有多种强迫思维）"/>
							</label>
						</div>
                    </div>
                    <div>
                        <input id="ybo_1_submit" type="button" class="btn btn-success text-center" style="width:68px;height:34px" value="下一题">
                        <input type="button" class="btn btn-warning text-center" style="width:68px;height:34px" value="退&nbsp;&nbsp;出">
                    </div>
                </form>
            </div>
			<div class="ybo_2" style="text-align: center;display: none">
                <form name="ybo_2" action="#">
                    <div class="row"><h3>2. 您的强迫思维对社交、学业成就或工作能力有多大妨碍？</h3> </div>
					<div class="row"><h4>（假如目前没有工作，则强迫思维对每天日常活动的妨碍有多大？回答此题时，请想是否有任何事情因为强迫思维而不去做或较少做）</h4> </div>
                    <div class="options" style=" text-align: left;padding-left: 25%">
						<div class="row show-grid" style="margin:10px 0 10px 10px">
							<label>
								<input type="radio" name="impediment_degree1" value=0 data-labelauty="0=不受妨碍"/>
							</label>
						</div>
						<div class="row show-grid" style="margin:10px">
							<label>
								<input type="radio" name="impediment_degree1" value=1 data-labelauty="1=轻微。稍微妨碍社交或工作活动，但整体表现并无大碍"/>
							</label>
						</div>
						<div class="row show-grid" style="margin:10px">
							<label>
								<input type="radio" name="impediment_degree1" value=2 data-labelauty="2=中度。确实妨碍社交或工作活动，但仍可应付"/>
							</label>
						</div>
						<div class="row show-grid" style="margin:10px">
							<label>
								<input type="radio" name="impediment_degree1" value=3 data-labelauty="3=重度。导致社交或工作表现的障碍"/>
							</label>
						</div>
						<div class="row show-grid" style="margin:10px">
							<label>
								<input type="radio" name="impediment_degree1" value=4 data-labelauty="4=极度。无能力应付社交或工作"/>
							</label>
						</div>
                    </div>
                    <div>
                        <input id="ybo_2_submit" type="button" class="btn btn-success text-center" style="width:68px;height:34px" value="下一题">
                        <input type="button" class="btn btn-warning text-center" style="width:68px;height:34px" value="退&nbsp;&nbsp;出">
                    </div>
                </form>
            </div>
			<div class="ybo_3" style="text-align: center;display: none">
                <form name="ybo_3" action="#">
                    <div class="row"><h3>3. 您的强迫思维给您带来多大的苦恼或困扰？</h3> </div>
                    <div class="options" style=" text-align: left;padding-left: 30%">
                        <div class="row show-grid" style="margin:10px 0 10px 10px">
							<label>
								<input type="radio" name="distress" value=0  data-labelauty="0=没有"/>
							</label>
						</div>
						<div class="row show-grid" style="margin:10px">
							<label>
								<input type="radio" name="distress" value=1  data-labelauty="1=轻微。不会太烦人"/>
							</label>
						</div>
						<div class="row show-grid" style="margin:10px">
							<label>
								<input type="radio" name="distress" value=2  data-labelauty="2=中度。觉得很烦，但尚可应付"/>
							</label>
						</div>
						<div class="row show-grid" style="margin:10px">
							<label>
								<input type="radio" name="distress" value=3  data-labelauty="3=重度。非常烦人"/>
							</label>
						</div>
						<div class="row show-grid" style="margin:10px">
							<label>
								<input type="radio" name="distress" value=4  data-labelauty="4=极重。几乎一直持续且令人丧志地苦恼"/>
							</label>
						</div>
                    </div>
                    <div>
                        <input id="ybo_3_submit" type="button" class="btn btn-success text-center" style="width:68px;height:34px" value="下一题">
                        <input type="button" class="btn btn-warning text-center" style="width:68px;height:34px" value="退&nbsp;&nbsp;出">
                    </div>
                </form>
            </div>
			<div class="ybo_4" style="text-align: center;display: none">
                <form name="ybo_4" action="#">
                    <div class="row"><h3>4. 您有多少努力对抗强迫思维？你是否尝试转移注意力或不去想它呢？（重点不在于是否成功转移，而在于你有多努力对抗或尝试频率有多高）</h3> </div>
                    <div class="options" style=" text-align: left;padding-left: 25%">
                        <div class="row show-grid" style="margin:10px 0 10px 10px">
							<label>
								<input type="radio"  name="fightforced_degree" value=0 data-labelauty="0=一直不断地努力与之对抗（或症状很轻微，不需要积极地对抗）"/>
							</label>
						</div>
						<div class="row show-grid" style="margin:10px">
							<label>
								<input type="radio"  name="fightforced_degree" value=1 data-labelauty="1=大部分时间都试图与之对抗（超过一半的时间我都试图与之对抗）"/>
							</label>
						</div>
						<div class="row show-grid" style="margin:10px">
							<label>
								<input type="radio"  name="fightforced_degree" value=2 data-labelauty="2=用些许努力去对抗"/>
							</label>
						</div>
						<div class="row show-grid" style="margin:10px">
							<label>
								<input type="radio"  name="fightforced_degree" value=3 data-labelauty="3=屈服于所有的强迫思维，未试图控制，但仍有些不甘心。"/>
							</label>
						</div>
						<div class="row show-grid" style="margin:10px">
							<label>
								<input type="radio"  name="fightforced_degree" value=4 data-labelauty="4=完全愿意屈服于强迫思维"/>
							</label>
						</div>
                    </div>
                    <div>
                        <input id="ybo_4_submit" type="button" class="btn btn-success text-center" style="width:68px;height:34px" value="下一题">
                        <input type="button" class="btn btn-warning text-center" style="width:68px;height:34px" value="退&nbsp;&nbsp;出">
                    </div>
                </form>
            </div>
			<div class="ybo_5" style="text-align: center;display: none">
                <form name="ybo_5" action="#">
                    <div class="row"><h3>5. 您控制强迫思维的能力有多少？您停止或转移强迫思维的效果如何？</h3> </div>
					<div class="row"><h4>（不包括通过强迫行为来停止强迫思维）</h4></div>
                    <div class="options" style=" text-align: left;padding-left: 25%">
                        <div class="row show-grid" style="margin:10px 0 10px 10px">
							<label>
								<input type="radio"  name="control_ability1" value=0 data-labelauty="0=完全控制。我可以完全控制" />
							</label>
						</div>
						<div class="row show-grid" style="margin:10px">
							<label>
								<input type="radio"  name="control_ability1" value=1 data-labelauty="1=大多能控制。只要花些力气与注意力，即能停止或转移强迫思维"/>
							</label>
						</div>
						<div class="row show-grid" style="margin:10px">
							<label>
								<input type="radio"  name="control_ability1" value=2 data-labelauty="2=中等程度控制。“有时”能停止或转移强迫思维"/>
							</label>
						</div>
						<div class="row show-grid" style="margin:10px">
							<label>
								<input type="radio"  name="control_ability1" value=3 data-labelauty="3=控制力弱。很少能成功地停止或消除强迫思维，只能转移"/>
							</label>
						</div>
						<div class="row show-grid" style="margin:10px">
							<label>
								<input type="radio"  name="control_ability1" value=4 data-labelauty="4=无法控制。完全不能自主，连转移一下强迫思维的能力都没有主诉的强迫行为"/>
							</label>
						</div>
                    </div>
                    <div>
                        <input id="ybo_5_submit" type="button" class="btn btn-success text-center" style="width:68px;height:34px" value="下一题">
                        <input type="button" class="btn btn-warning text-center" style="width:68px;height:34px" value="退&nbsp;&nbsp;出">
                    </div>
                </form>
            </div>
			<div class="ybo_6" style="text-align: center;display: none">
                <form name="ybo_6" action="#">
                    <div class="row"><h3>6. 您每天花多少时间在强迫行为上？每天做出强迫行为的频率有多高？</h3> </div>
                    <div class="options" style=" text-align: left;padding-left: 25%">
                        <div class="row show-grid" style="margin:10px 0 10px 10px">
							<label>
								<input type="radio" class="compulsion_frequency_0 " name="compulsion_frequency" value=0 data-labelauty="0=完全无强迫行为"/>
							</label>
						</div>
						<div class="row show-grid" style="margin:10px">
							<label>
								<input type="radio" class="compulsion_frequency_others " name="compulsion_frequency" value=1 data-labelauty="1=轻微（少于一小时），或偶尔有（一天不超过8次）"/>
							</label>
						</div>
						<div class="row show-grid" style="margin:10px">
							<label>
								<input type="radio" class="compulsion_frequency_others " name="compulsion_frequency" value=2 data-labelauty="2=中度（一至三小时），或常常有（一天超过8次，但一天大部分时间没有强迫行为）"/>
							</label>
						</div>
						<div class="row show-grid" style="margin:10px">
							<label>
								<input type="radio" class="compulsion_frequency_others " name="compulsion_frequency" value=3 data-labelauty="3=重度（多于三小时但不超过八小时），或频率非常高（一天超过8次，且一天大部分时间有强迫行为）"/>
							</label>
						</div>
						<div class="row show-grid" style="margin:10px">
							<label>
								<input type="radio" class="compulsion_frequency_others " name="compulsion_frequency" value=4 data-labelauty="4=极重（多于八小时），或几乎无时无刻都有（次数多到无法计算，且一小时内很少没有多种强迫思维）"/>
							</label>
						</div>
                    </div>
                    <div>
                        <input  id="ybo_6_submit" type="button" class="btn btn-success text-center" style="width:68px;height:34px" value="下一题">
                        <input type="button" class="btn btn-warning text-center" style="width:68px;height:34px" value="退&nbsp;&nbsp;出">
                    </div>
                </form>
            </div>
			<div class="ybo_7" style="text-align: center;display: none">
                <form name="ybo_7" action="#">
                    <div class="row"><h3>7. 您的强迫行为对社交、学业成就或工作能力有多大妨碍？</h3> </div>
					<div class="row"><h4>（假如目前没有工作，则强迫行为对每天日常活动的妨碍有多大？）</h4></div>
                    <div class="options" style=" text-align: left;padding-left: 25%">
                        <div class="row show-grid" style="margin:10px 0 10px 10px">
							<label>
								<input type="radio"  name="impediment_degree2" value=0 data-labelauty="0=不受妨碍"/>
							</label>
						</div>
						<div class="row show-grid" style="margin:10px">
							<label>
								<input type="radio"  name="impediment_degree2" value=1 data-labelauty="1=轻微。稍微妨碍社交或工作活动，但整体表现并无大碍"/>
							</label>
						</div>
						<div class="row show-grid" style="margin:10px">
							<label>
								<input type="radio"  name="impediment_degree2" value=2 data-labelauty="2=中度。确实妨碍社交或工作活动，但仍可应付"/>
							</label>
						</div>
						<div class="row show-grid" style="margin:10px">
							<label>
								<input type="radio"  name="impediment_degree2" value=3 data-labelauty="3=重度。导致社交或工作表现的障碍"/>
							</label>
						</div>
						<div class="row show-grid" style="margin:10px">
							<label>
								<input type="radio"  name="impediment_degree2" value=4 data-labelauty="4=极度。无能力应付社交或工作"/>
							</label>
						</div>
                    </div>
                    <div>
                        <input  id="ybo_7_submit" type="button" class="btn btn-success text-center" style="width:68px;height:34px" value="下一题">
                        <input type="button" class="btn btn-warning text-center" style="width:68px;height:34px" value="退&nbsp;&nbsp;出">
                    </div>
                </form>
            </div>
			<div class="ybo_8" style="text-align: center;display: none">
                <form name="ybo_8" action="#">
                    <div class="row"><h3>8. 假如被制止从事强迫行为时，您有什么感觉？您会多焦虑？</h3> </div>
                    <div class="options" style=" text-align: left;padding-left: 25%">
                        <div class="row show-grid" style="margin:10px 0 10px 10px">
							<label>
								<input type="radio"  name="stopcompulsion_anxiety" value=0 data-labelauty="0=没有焦虑" />
							</label>
						</div>
						<div class="row show-grid" style="margin:10px">
							<label>
								<input type="radio"  name="stopcompulsion_anxiety" value=1 data-labelauty="1=轻微。假如强迫行为被阻止，只是稍微焦虑"/>
							</label>
						</div>
						<div class="row show-grid" style="margin:10px">
							<label>
								<input type="radio"  name="stopcompulsion_anxiety" value=2 data-labelauty="2=中度。假如强迫行为被阻止，会有中等程度的焦虑，但是仍可以应付"/>
							</label>
						</div>
						<div class="row show-grid" style="margin:10px">
							<label>
								<input type="radio"  name="stopcompulsion_anxiety" value=3 data-labelauty="3=严重。假如强迫行为被阻止，会明显且困扰地增加焦虑"/>
							</label>
						</div>
						<div class="row show-grid" style="margin:10px">
							<label>
								<input type="radio"  name="stopcompulsion_anxiety" value=4 data-labelauty="4=极度。假如有任何需要改变强迫行为的处置时，会导致极度地焦虑"/>
							</label>
						</div>
                    </div>
                    <div>
                        <input id="ybo_8_submit" type="button" class="btn btn-success text-center" style="width:68px;height:34px" value="下一题">
                        <input type="button" class="btn btn-warning text-center" style="width:68px;height:34px" value="退&nbsp;&nbsp;出">
                    </div>
                </form>
            </div>
			<div class="ybo_9" style="text-align: center;display: none">
                <form name="ybo_9" action="#">
                    <div class="row"><h3>9. 您有多努力去对抗强迫行为？或尝试停止强迫行为的频率？</h3> </div>
					<div class="row"><h4>（仅评估你有多努力对抗强迫行为或尝试频率有多高，而不在于评估您停止强迫行为的效果有多好）</h4></div>
                    <div class="options" style=" text-align: left;padding-left: 25%">
                        <div class="row show-grid" style="margin:10px 0 10px 10px">
							<label>
								<input type="radio"  name="stopforced_frequency" value=0 data-labelauty="0=一直不断地努力与之对抗（或症状很轻微，不需要积极地对抗）"/>
							</label>
						</div>
						<div class="row show-grid" style="margin:10px">
							<label>
								<input type="radio"  name="stopforced_frequency" value=1 data-labelauty="1=大部分时间都试图与之对抗（超过一半的时间我都试图与之对抗）"/>
							</label>
						</div>
						<div class="row show-grid" style="margin:10px">
							<label>
								<input type="radio"  name="stopforced_frequency" value=2 data-labelauty="2=用些许努力去对抗"/>
							</label>
						</div>
						<div class="row show-grid" style="margin:10px">
							<label>
								<input type="radio"  name="stopforced_frequency" value=3 data-labelauty="3=屈服于所有的强迫行为，未试图控制，但仍有些不甘心"/>
							</label>
						</div>
						<div class="row show-grid" style="margin:10px">
							<label>
								<input type="radio"  name="stopforced_frequency" value=4 data-labelauty="4=完全愿意屈服于强迫行为"/>
							</label>
						</div>
                    </div>
                    <div>
                        <input id="ybo_9_submit" type="button" class="btn btn-success text-center" style="width:68px;height:34px" value="下一题">
                        <input type="button" class="btn btn-warning text-center" style="width:68px;height:34px" value="退&nbsp;&nbsp;出">
                    </div>
                </form>
            </div>
			<div class="ybo_10" style="text-align: center;display: none">
                <form name="ybo_10" action="#">
                    <div class="row"><h3>10. 您控制强迫行为的能力如何？您停止强迫（仪式）行为的效果如何？</h3> </div>
					<div class="row"><h4>（假如你很少去对抗，那就回想那些少数对抗的情境，以便回答此题。）</h4></div>
                    <div class="options" style=" text-align: left;padding-left: 25%">
                        <div class="row show-grid" style="margin:10px 0 10px 10px">
							<label>
								<input type="radio"  name="control_ability2" value=0 data-labelauty="0=完全控制。我可以完全控制" />
							</label>
						</div>
						<div class="row show-grid" style="margin:10px">
							<label>
								<input type="radio"  name="control_ability2" value=1 data-labelauty="1=大多能控制。只要花些力气与注意力，即能停止强迫行为"/>
							</label>
						</div>
						<div class="row show-grid" style="margin:10px">
							<label>
								<input type="radio"  name="control_ability2" value=2 data-labelauty="2=中等程度控制。“有时”控制强迫行为，有些困难"/>
							</label>
						</div>
						<div class="row show-grid" style="margin:10px">
							<label>
								<input type="radio"  name="control_ability2" value=3 data-labelauty="3=控制力弱。只能忍耐耽搁一下时间，但最终还是必须完成强迫行为"/>
							</label>
						</div>
						<div class="row show-grid" style="margin:10px">
							<label>
								<input type="radio"  name="control_ability2" value=4 data-labelauty="4=完全无法控制。连耽搁一下的能力都没有"/>
							</label>
						</div>
                    </div>
                    <div>
                        <input id="ybo_10_submit" type="button" class="btn btn-success text-center" style="width:68px;height:34px" value="下一题">
                        <input type="button" class="btn btn-warning text-center" style="width:68px;height:34px" value="退&nbsp;&nbsp;出">
                    </div>
                </form>
            </div>
        </div>
    </div>
{% endblock %}

{% block js %}
<script type="text/javascript" src="{% static '/js/jquery-radio-beauty.js'%}"></script>
<script>
	let time = new Date();
	$(document).ready(function(){
		$("input[type='radio']").labelauty();
		$("div[class='ybo_1']").show();

		$("#ybo_1_submit").on('click', function(){
			if (document.ybo_1.forced_frequency.value==="") {
                alert("问题一不能为空！");
          	}else if(document.ybo_1.forced_frequency.value==="0"){
				ajax_post($('#ybo_1'))
				$("div[class='ybo_1']").hide();
				$("div[class='ybo_6']").show();
			}else{
				ajax_post($('#ybo_1'))
				$("div[class='ybo_1']").hide();
				$("div[class='ybo_2']").show();
			}
		});

		$("#ybo_2_submit").on('click', function(){
			if (document.ybo_2.impediment_degree1.value==="") {
                alert("问题二不能为空！");
          	}else {
				ajax_post($('#ybo_2'))
				$("div[class='ybo_2']").hide();
				$("div[class='ybo_3']").show();
			}
		});

		$("#ybo_3_submit").on('click', function(){
			if (document.ybo_3.distress.value==="") {
                alert("问题三不能为空！");
          	}else {
				ajax_post($('#ybo_3'))
				$("div[class='ybo_3']").hide();
				$("div[class='ybo_4']").show();
			}
		});

		$("#ybo_4_submit").on('click', function(){
			if (document.ybo_4.fightforced_degree.value==="") {
                alert("问题四不能为空！");
          	}else {
				ajax_post($('#ybo_4'))
				$("div[class='ybo_4']").hide();
				$("div[class='ybo_5']").show();
			}
		});

		$("#ybo_5_submit").on('click', function(){
			if (document.ybo_5.control_ability1.value==="") {
                alert("问题五不能为空！");
          	}else {
				ajax_post($('#ybo_5'))
				$("div[class='ybo_5']").hide();
				$("div[class='ybo_6']").show();
			}
		});

		$("#ybo_6_submit").on('click', function(){
			if (document.ybo_6.compulsion_frequency.value==="") {
                alert("问题流不能为空！");
          	}else if(document.ybo_6.compulsion_frequency.value==="0"){
				ajax_post($('#ybo_6'))
			}else {
				ajax_post($('#ybo_6'))
				$("div[class='ybo_6']").hide();
				$("div[class='ybo_7']").show();
			}
		});

		$("#ybo_7_submit").on('click', function(){
			if (document.ybo_7.impediment_degree2.value==="") {
                alert("问题七不能为空！");
          	}else {
				ajax_post($('#ybo_7'))
				$("div[class='ybo_7']").hide();
				$("div[class='ybo_8']").show();
			}
		});

		$("#ybo_8_submit").on('click', function(){
			if (document.ybo_8.stopcompulsion_anxiety.value==="") {
                alert("问题八不能为空！");
          	}else {
				ajax_post($('#ybo_8'))
				$("div[class='ybo_8']").hide();
				$("div[class='ybo_9']").show();
			}
		});

		$("#ybo_9_submit").on('click', function(){
			if (document.ybo_9.stopforced_frequency.value==="") {
                alert("问题九不能为空！");
          	}else {
				ajax_post($('#ybo_9'))
				$("div[class='ybo_9']").hide();
				$("div[class='ybo_10']").show();
			}
		});

		$("#ybo_10_submit").on('click', function(){
			if (document.ybo_10.control_ability2.value==="") {
                alert("问题十不能为空！");
          	}else {
				ajax_post($('#ybo_10'))
				$("div[class='ybo_1']").hide();
				$("div[class='ybo_2']").show();
			}
		});
	});

	function get_duration(){
		const current_time = new Date();
		const duration = time - current_time;
		time = current_time;
		return -duration;
	}

	function ajax_post(form){
		const csrf = $('input[name="csrfmiddlewaretoken"]').val();
		$.ajax({
		url: 'http://127.0.0.1:8000/scales/test_submit',
		type: 'POST',
		dataType: 'JSON',
		async:true,
		data: {'data':form.serialize(),
			'duration':get_duration(),
			'csrfmiddlewaretoken': csrf
			}
		})
	}

</script>
{% endblock %}